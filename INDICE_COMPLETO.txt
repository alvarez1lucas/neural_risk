# ğŸ“š NEURAL RISK v0.2.0 - ÃNDICE COMPLETO DE ARCHIVOS

## ğŸ¯ COMIENZA AQUÃ (3 opciones segÃºn tu necesidad)

### **Si quieres empezar INMEDIATAMENTE (RECOMENDADO):**
â†’ Lee: `DEPLOY_FINAL_GUIDE.md` (10 min) â­ NUEVO
â†’ Abre 4 terminales PowerShell
â†’ Sigue DEPLOYMENT SEQUENCE exactamente
â†’ Monitorea primeras 2 horas

### **Si quieres entender TODO antes:**
â†’ Lee: `PRE_DEPLOY_CHECKLIST.md` (30 min)
â†’ Lee: `ARQUITECTURA_PRODUCCION_v0.2.0.md` (30 min)
â†’ Lee: `DEPLOY_FINAL_GUIDE.md` (10 min)
â†’ Luego: Deploy

### **Si quieres validar primero:**
â†’ Ejecuta: `python scripts/pre_deploy_check.py` (1 min)
â†’ Ejecuta: `python scripts/benchmark_timing.py` (5 min)
â†’ Ejecuta: `notebooks/backtest_v0.2.0.ipynb` (30 min)
â†’ Luego: Deploy

---

## ğŸ“‚ ESTRUCTURA DE ARCHIVOS COMPLETA

### **ğŸ“‹ DOCUMENTACIÃ“N (9 archivos)** â­ DEPLOY_FINAL_GUIDE.md NUEVO

```
DEPLOY_FINAL_GUIDE.md â­ NUEVO - DEPLOY SEQUENCE STEP-BY-STEP
â”œâ”€ Pre-check final
â”œâ”€ Archivos a observar (logs, config, DB)
â”œâ”€ 4 terminales exactamente quÃ© ejecutar
â”œâ”€ QuÃ© esperar en cada terminal
â”œâ”€ Troubleshooting
â”œâ”€ Success criteria (despuÃ©s 1 hora)
â”œâ”€ Comandos rÃ¡pidos de monitoreo
â””â”€ Checklist final

PRE_DEPLOY_CHECKLIST.md â­ NUEVO - DEPLOY GUIDE COMPLETA
â”œâ”€ Phase 0: Validaciones bÃ¡sicas (Python, deps, estructura)
â”œâ”€ Phase 1: Validaciones de configuraciÃ³n (config.yaml, env vars)
â”œâ”€ Phase 2: Validaciones de datos (benchmark, backtest, DB)
â”œâ”€ Phase 3: Chequeos de archivos clave
â”œâ”€ Phase 4: Sequence EXACTA de 4 terminales
â”œâ”€ Phase 5: Monitoreo en vivo primeras 2 horas
â”œâ”€ Phase 6: Troubleshooting rÃ¡pido
â”œâ”€ Phase 7: ValidaciÃ³n post-deploy
â””â”€ RESUMEN: Checklist final (12 items)

RESUMEN_FINAL_OPCION_B.txt â­ COMIENZA AQUÃ
â”œâ”€ Resumen ejecutivo 2 min
â”œâ”€ QuÃ© fue creado
â”œâ”€ PrÃ³ximos 3 pasos
â”œâ”€ MÃ©tricas de Ã©xito
â””â”€ Status final
VALIDACIÃ“N_TIMING_E_INTERVALOS.md â­ NUEVO
â”œâ”€ Respuestas claras a 3 preguntas crÃ­ticas
â”œâ”€ AnÃ¡lisis de timing real vs aspiracional
â”œâ”€ RecomendaciÃ³n: 300s â†’ 180s â†’ 60s gradual
â”œâ”€ CÃ³mo ejecutar benchmark_timing.py
â”œâ”€ Plan de escalado por fases
â””â”€ Truth table: cuÃ¡ndo cambiar intervals
ARQUITECTURA_PRODUCCION_v0.2.0.md (400 lÃ­neas)
â”œâ”€ 5 capas explicadas (Data â†’ Engine â†’ Executor â†’ UI)
â”œâ”€ Flujos desarrollo vs producciÃ³n
â”œâ”€ Optimizaciones crÃ­ticas
â”œâ”€ Deployment guide
â”œâ”€ Monitoreo & alertas
â””â”€ Troubleshooting

QUICK_START_OPCION_B_COMPLETA.md (300 lÃ­neas)
â”œâ”€ Archivos creados (7 componentes)
â”œâ”€ Setup inicial (5 pasos)
â”œâ”€ OperaciÃ³n dÃ­a a dÃ­a
â”œâ”€ ConfiguraciÃ³n importante
â”œâ”€ Monitoreo en vivo
â””â”€ Checklist final

GUIA_VISUAL_OPERACIONAL.txt (400 lÃ­neas)
â”œâ”€ Diagramas ASCII (5 capas)
â”œâ”€ Flujo temporal detallado (ciclo 09:00-09:02)
â”œâ”€ Tabla de timing
â”œâ”€ Comandos de ejecuciÃ³n
â””â”€ Resultado esperado

OPCION_B_COMPLETADA.txt
â”œâ”€ Resumen: QuÃ© fue creado
â”œâ”€ Estructura operativa (4 terminales)
â”œâ”€ Componentes principales
â”œâ”€ Pasos para activar
â””â”€ Checklist final

ARQUITECTURA_ESCALABLE_PRODUCCION.md (antiguo, referencia)
â””â”€ [Reemplazado por ARQUITECTURA_PRODUCCION_v0.2.0.md]

GUIA_VERSIÃ“N_0.2.0_5_NUEVOS_EXPERTOS.md (antiguo, referencia)
â”œâ”€ Describe 5 nuevos modelos
â”œâ”€ Benchmarks
â””â”€ Ejemplos cripto

[+ 4 documentos mÃ¡s antiguos]
```

---

## ğŸ”§ CÃ“DIGO NUEVO (OpciÃ³n B)

### **`neural_risk/agents/portfolio_agent.py`** (850 lÃ­neas)
```python
# PASO 5: AGENTE INTELIGENTE
# 7 componentes:
â”œâ”€ ExpertEvaluator
â”‚  â”œâ”€ calculate_sharpe_ratio()
â”‚  â”œâ”€ calculate_sortino_ratio()     # BEST para crashes cripto
â”‚  â”œâ”€ calculate_calmar_ratio()
â”‚  â”œâ”€ calculate_win_rate()
â”‚  â”œâ”€ calculate_profit_factor()
â”‚  â””â”€ evaluate_expert()             # Devuelve composite score
â”‚
â”œâ”€ DynamicWeighting
â”‚  â”œâ”€ select_arm()                  # Thompson Sampling
â”‚  â”œâ”€ update_arm()                  # Beta distribution update
â”‚  â”œâ”€ recalculate_weights()
â”‚  â””â”€ get_weights()                 # Por expert name
â”‚
â”œâ”€ SignalGenerator
â”‚  â””â”€ generate_signal()             # LONG/SHORT/HOLD + confidence
â”‚
â”œâ”€ DynamicStopLoss
â”‚  â””â”€ calculate_stop_loss()         # Ïƒ * confidence * vol * threshold
â”‚
â”œâ”€ PositionSizer
â”‚  â””â”€ calculate_position_size()     # Kelly Criterion 0.25x
â”‚
â”œâ”€ StakingAllocator
â”‚  â”œâ”€ get_staking_apy()             # 3-15% dinÃ¡mico
â”‚  â””â”€ calculate_daily_interest()
â”‚
â””â”€ PortfolioAgent (Orquestador)
   â”œâ”€ execute_portfolio_decision()  # Paso 1-5 completo
   â”œâ”€ update_positions()
   â”œâ”€ close_position()
   â””â”€ get_portfolio_metrics()
```

### **`scripts/train_models.py`** (380 lÃ­neas)
```python
# LAYER 2: Entrena modelos offline (cron 00:00 UTC)
class ModelTrainer:
  â”œâ”€ load_asset_data()              # Ãšltimos 6 meses
  â”œâ”€ train_hmm()
  â”œâ”€ train_xgboost()
  â”œâ”€ train_garch()
  â”œâ”€ train_all_models()             # Paralelo
  â”œâ”€ save_models()                  # pickle cache
  â””â”€ run()                           # Main loop
```

### **`scripts/run_data_fetcher.py`** (200 lÃ­neas)
```python
# LAYER 1: Datos cada 60s
class DataFetcher:
  â”œâ”€ fetch_from_api()               # Binance/Kraken
  â”œâ”€ cache_prices()                 # Redis/memory
  â”œâ”€ save_to_db()                   # SQLite
  â”œâ”€ get_latest_price()             # Cache lookup
  â”œâ”€ get_last_n_prices()            # HistÃ³rico
  â””â”€ run()                           # Main loop
```

### **`scripts/run_engine.py`** (300 lÃ­neas)
```python
# LAYER 3: Paso 1-5 cada 60s (2-3 segundos)
class EngineService:
  â”œâ”€ fetch_current_data()           # Del cache
  â”œâ”€ run_paso_1_to_4()              # 9 expertos paralelo
  â”œâ”€ run_paso_5()                   # PortfolioAgent
  â”œâ”€ process_asset()                # Por asset (ThreadPool)
  â”œâ”€ run_cycle()                    # Ciclo completo
  â””â”€ run()                           # Main loop
```

### **`scripts/run_executor.py`** (320 lÃ­neas)
```python
# LAYER 4: Coloca Ã³rdenes
class OrderExecutor:
  â”œâ”€ get_pending_decisions()        # Del engine
  â”œâ”€ check_daily_loss()             # ValidaciÃ³n
  â”œâ”€ validate_order()               # Confidence, size
  â”œâ”€ place_order()                  # Binance API + retry
  â”œâ”€ _save_order_to_db()            # Audit trail
  â”œâ”€ update_fills()                 # SincronizaciÃ³n
  â”œâ”€ run_cycle()                    # Ciclo
  â””â”€ run()                           # Main loop
```

### **`config/config.yaml`** (140 lÃ­neas)
```yaml
# ConfiguraciÃ³n global
mode: production
timeframes:
  short: 10
  medium: 30
  long: 100
  strategic: 1000
exchanges:
  primary: binance
  assets: [BTC, ETH, SOL, AVAX, ARB]
signals:
  long_threshold: 0.60
  short_threshold: -0.60
  min_confidence: 0.50
execution:
  order_type: market
  max_daily_loss_pct: 0.05
  max_retries: 3
# ... 80 lÃ­neas mÃ¡s (see file)
```

---

## ğŸ“” NOTEBOOKS JUPYTER (2 nuevos)

### **`notebooks/live_dashboard.ipynb`** â­ EJECUTAR EN PRODUCCIÃ“N
```python
# Refresca cada 30s
â”œâ”€ get_pnl_metrics()               # Total + Daily PnL
â”œâ”€ get_open_positions()            # Unrealized P&L
â”œâ”€ get_expert_performance()        # SeÃ±ales Ãºltimas 24h
â”œâ”€ check_alerts()                  # Alertas automÃ¡ticas
â””â”€ Auto-refresh loop               # 30s interval
```

### **`notebooks/backtest_v0.2.0.ipynb`** â­ EJECUTAR ANTES DE DEPLOY
```python
# Testing offline sin interferir live
class SimpleBacktester:
  â”œâ”€ load_backtest_data()           # CSV histÃ³rico
  â”œâ”€ generate_signal()              # HeurÃ­stica simple
  â”œâ”€ calculate_position_size()      # Kelly
  â”œâ”€ execute_trade()                # Simulado
  â”œâ”€ run_backtest()                 # Loop principal
  â””â”€ get_metrics()                  # Sortino, Win Rate, PF
```

---

## ğŸ—‚ï¸ ESTRUCTURA DIRECTORIO

```
neural-risk/
â”‚
â”œâ”€ config/
â”‚  â””â”€ config.yaml â­ EDITAR para tuning
â”‚
â”œâ”€ data/
â”‚  â”œâ”€ neural_risk.db               # SQLite (creado automÃ¡ticamente)
â”‚  â”œâ”€ trained_models.pkl           # Modelos cache (creado por train_models.py)
â”‚  â”œâ”€ BTC_USD_data.csv             # HistÃ³rico (para backtest)
â”‚  â””â”€ ETH_USD_data.csv             # HistÃ³rico (para backtest)
â”‚
â”œâ”€ logs/
â”‚  â”œâ”€ neural_risk.log              # General log
â”‚  â””â”€ trades.log                   # Trades detallado
â”‚
â”œâ”€ scripts/
â”‚  â”œâ”€ pre_deploy_check.py â­ NUEVO - ValidaciÃ³n automÃ¡tica
â”‚  â”œâ”€ run_data_fetcher.py â­ Terminal 1
â”‚  â”œâ”€ run_engine.py â­ Terminal 2
â”‚  â”œâ”€ run_executor.py â­ Terminal 3
â”‚  â”œâ”€ train_models.py â­ Cron 00:00 UTC
â”‚  â”œâ”€ benchmark_timing.py â­ Mide timing real
â”‚  â””â”€ monitor.py                   # Utilidad
â”‚
â”œâ”€ notebooks/
â”‚  â”œâ”€ live_dashboard.ipynb â­ Terminal 4 (Opcional)
â”‚  â”œâ”€ backtest_v0.2.0.ipynb â­ EJECUTAR ANTES DE DEPLOY
â”‚  â”œâ”€ research.ipynb               # Development
â”‚  â””â”€ experiment_params.ipynb      # Nuevas ideas
â”‚
â”œâ”€ neural_risk/
â”‚  â”œâ”€ __init__.py                  # v0.2.0 exports
â”‚  â”œâ”€ engine.py                    # Paso 1-5 orquestador
â”‚  â”‚
â”‚  â”œâ”€ agents/
â”‚  â”‚  â”œâ”€ portfolio_agent.py â­ NUEVO PASO 5
â”‚  â”‚  â””â”€ strategy_router.py        # Antiguo (deprecated)
â”‚  â”‚
â”‚  â”œâ”€ models/
â”‚  â”‚  â”œâ”€ hmm_model.py              # HMM
â”‚  â”‚  â”œâ”€ classic.py                # XGBoost
â”‚  â”‚  â”œâ”€ causal_strategy.py        # Causal
â”‚  â”‚  â”œâ”€ risk_model.py             # Deep TFT
â”‚  â”‚  â”œâ”€ bayesian_model.py         # Bayesian
â”‚  â”‚  â”œâ”€ ensemble_trainer.py       # Ensemble + Kalman
â”‚  â”‚  â”œâ”€ garch_volatility.py â­ NUEVO GARCH
â”‚  â”‚  â”œâ”€ lstm_transformer.py â­ NUEVO LSTM/TF
â”‚  â”‚  â”œâ”€ reinforcement_learning.py â­ NUEVO RL
â”‚  â”‚  â”œâ”€ copula_expert.py â­ NUEVO COPULA
â”‚  â”‚  â”œâ”€ anomaly_detection.py â­ NUEVO ANOMALY
â”‚  â”‚  â””â”€ ... 10 mÃ¡s
â”‚  â”‚
â”‚  â”œâ”€ data/
â”‚  â”‚  â”œâ”€ data_processor.py
â”‚  â”‚  â”œâ”€ feature_engineering.py
â”‚  â”‚  â”œâ”€ labeling.py
â”‚  â”‚  â””â”€ ... 3 mÃ¡s
â”‚  â”‚
â”‚  â”œâ”€ cortex/
â”‚  â”‚  â””â”€ causal_selector.py
â”‚  â”‚
â”‚  â”œâ”€ metrics/
â”‚  â”‚  â”œâ”€ backtest.py
â”‚  â”‚  â””â”€ risk.py
â”‚  â”‚
â”‚  â”œâ”€ optimization/
â”‚  â”‚  â””â”€ hedging.py
â”‚  â”‚
â”‚  â””â”€ __pycache__/
â”‚
â”œâ”€ tests/
â”‚  â””â”€ test_v0.2.0_imports.py
â”‚
â”œâ”€ [DOCUMENTACIÃ“N]
â”‚  â”œâ”€ RESUMEN_FINAL_OPCION_B.txt â­ COMIENZA AQUÃ
â”‚  â”œâ”€ ARQUITECTURA_PRODUCCION_v0.2.0.md â­ ENTENDER
â”‚  â”œâ”€ QUICK_START_OPCION_B_COMPLETA.md â­ SETUP
â”‚  â”œâ”€ GUIA_VISUAL_OPERACIONAL.txt â­ VISUAL
â”‚  â”œâ”€ OPCION_B_COMPLETADA.txt
â”‚  â”œâ”€ GUIA_VERSIÃ“N_0.2.0_5_NUEVOS_EXPERTOS.md (antiguo)
â”‚  â”œâ”€ IMPLEMENTACIÃ“N_v0.2.0_COMPLETA.md (antiguo)
â”‚  â”œâ”€ QUICK_START_v0.2.0.md (antiguo)
â”‚  â”œâ”€ VERSION_0.2.0_FINAL.txt (antiguo)
â”‚  â””â”€ RESUMEN_EJECUTIVO_v0.2.0.txt (antiguo)
â”‚
â”œâ”€ pyproject.toml
â”œâ”€ requirements.txt
â””â”€ README.md
```

---

## ğŸ¯ MAPA MENTAL: CÃ“MO NAVEGAR

```
Â¿Quieres ENTENDER la arquitectura?
â†“
ARQUITECTURA_PRODUCCION_v0.2.0.md

Â¿Quieres SETUP step-by-step?
â†“
QUICK_START_OPCION_B_COMPLETA.md

Â¿Quieres VISUAL + timing?
â†“
GUIA_VISUAL_OPERACIONAL.txt

Â¿Quieres VERSION RÃPIDA?
â†“
RESUMEN_FINAL_OPCION_B.txt

Â¿Quieres EJECUTAR ahora?
â†“
1. notebooks/backtest_v0.2.0.ipynb
2. Luego: 4 terminales (ver GUIA_VISUAL)
3. Monitor: notebooks/live_dashboard.ipynb

Â¿Algo NO FUNCIONA?
â†“
1. Revisa: logs/neural_risk.log
2. Consulta: ARQUITECTURA_PRODUCCION_v0.2.0.md (Troubleshooting)
3. Verifica: config/config.yaml (parÃ¡metros)
```

---

## ğŸ“‹ CHECKLIST DE LECTURA RECOMENDADA

**MÃ­nimo ANTES de deploy (30 min):**
- [ ] RESUMEN_FINAL_OPCION_B.txt (5 min)
- [ ] PRE_DEPLOY_CHECKLIST.md PHASES 0-3 (15 min) â† NEW
- [ ] Ejecutar `python scripts/pre_deploy_check.py` (5 min) â† NEW
- [ ] GUIA_VISUAL_OPERACIONAL.txt (5 min)

**Recomendado (120 min):**
- [ ] RESUMEN_FINAL_OPCION_B.txt (5 min)
- [ ] PRE_DEPLOY_CHECKLIST.md COMPLETA (30 min) â† NEW
- [ ] VALIDACIÃ“N_TIMING_E_INTERVALOS.md (15 min)
- [ ] ARQUITECTURA_PRODUCCION_v0.2.0.md (30 min)
- [ ] QUICK_START_OPCION_B_COMPLETA.md (20 min)
- [ ] GUIA_VISUAL_OPERACIONAL.txt (15 min)
- [ ] Ejecutar benchmark_timing.py (5 min)
- [ ] Ejecutar backtest notebook (20 min)

**Completo (150+ min):**
- Lee TODOS los documentos
- Ejecuta pre_deploy_check.py
- Ejecuta benchmark_timing.py
- Ejecuta backtest + dashboard
- Entiende cada script
- Configura API keys
- Deploy!

---

## â­ ARCHIVOS MÃS IMPORTANTES

```
1. RESUMEN_FINAL_OPCION_B.txt
   â””â”€ Empieza aquÃ­ (2 min)

2. notebooks/backtest_v0.2.0.ipynb
   â””â”€ Valida antes de deploy (30 min)

3. ARQUITECTURA_PRODUCCION_v0.2.0.md
   â””â”€ Entiende todo (30 min)

4. config/config.yaml
   â””â”€ Tuning (editar antes de live)

5. scripts/run_*.py
   â””â”€ Ejecutar en 4 terminales

6. notebooks/live_dashboard.ipynb
   â””â”€ Monitoreo en vivo
```

---

## ğŸš€ PRÃ“XIMA ACCIÃ“N

**AHORA** â†’ Abre: `RESUMEN_FINAL_OPCION_B.txt`
**LUEGO** â†’ Ejecuta: `notebooks/backtest_v0.2.0.ipynb`
**DESPUÃ‰S** â†’ Lee: `GUIA_VISUAL_OPERACIONAL.txt`
**FINALMENTE** â†’ Deploy: 4 terminales (ver guide)

---

v0.2.0 | OpciÃ³n B Completa | 2025-01-30 | Production-Ready ğŸš€
