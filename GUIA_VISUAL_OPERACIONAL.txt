# ğŸš€ NEURAL RISK v0.2.0 - GUÃA VISUAL DE OPERACIÃ“N

## ğŸ“Š ARQUITECTURA VISUAL

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    NEURAL RISK v0.2.0 - STACK COMPLETO                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                           â•‘
â•‘  ğŸ¯ LAYER 5: MONITORING (Jupyter Interactive)                            â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ live_dashboard.ipynb (Refresca cada 30s)                          â”‚ â•‘
â•‘  â”‚ â”œâ”€ ğŸ’° PnL Real-time (Total + Diario)                            â”‚ â•‘
â•‘  â”‚ â”œâ”€ ğŸ“ Posiciones Abiertas (Unrealized PnL)                      â”‚ â•‘
â•‘  â”‚ â”œâ”€ ğŸ§  MÃ©tricas por Experto (Sortino, Win Rate, Profit Factor)  â”‚ â•‘
â•‘  â”‚ â”œâ”€ âš ï¸  Alertas AutomÃ¡ticas (Daily Loss, Stale Models)          â”‚ â•‘
â•‘  â”‚ â””â”€ ğŸ“ˆ GrÃ¡ficos Trades & Equity Curve                            â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                    â†‘                                       â•‘
â•‘  ğŸ“¥ INPUT: Lee desde SQLite (engine_decisions, orders, fills)            â•‘
â•‘                                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘                                                                           â•‘
â•‘  âš™ï¸  LAYER 4: EXECUTION (Background Service)                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ run_executor.py (Cada 60s)                                         â”‚ â•‘
â•‘  â”‚ â”œâ”€ Obtiene decisiones pending del engine                         â”‚ â•‘
â•‘  â”‚ â”œâ”€ Valida: daily_loss, confidence, position_size                â”‚ â•‘
â•‘  â”‚ â”œâ”€ Coloca orden en Binance/Kraken (market)                     â”‚ â•‘
â•‘  â”‚ â”œâ”€ Maneja retry logic robusto (3 intentos)                     â”‚ â•‘
â•‘  â”‚ â””â”€ Log en DB: orders table                                      â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘          â†‘ INPUT (de engine)          â†“ OUTPUT (a DB)                    â•‘
â•‘                                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘                                                                           â•‘
â•‘  ğŸ§  LAYER 3: ENGINE - PASO 1-5 (CORE INTELLIGENCE)                       â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ run_engine.py (Cada 60s) - Tiempo total: 2-3 segundos            â”‚ â•‘
â•‘  â”‚                                                                    â”‚ â•‘
â•‘  â”‚ PASO 1-4: 9 EXPERTOS EN PARALELO (ThreadPool, 4 workers)         â”‚ â•‘
â•‘  â”‚ â”œâ”€ HMM: Regime Detection (bear/normal/bull)                      â”‚ â•‘
â•‘  â”‚ â”œâ”€ XGBoost: Quick Signal                                          â”‚ â•‘
â•‘  â”‚ â”œâ”€ Causal: Statistical Effect                                    â”‚ â•‘
â•‘  â”‚ â”œâ”€ Deep TFT: Bayesian Forecast + Kalman                         â”‚ â•‘
â•‘  â”‚ â”œâ”€ GARCH: Conditional Volatility + Hedging                      â”‚ â•‘
â•‘  â”‚ â”œâ”€ LSTM/Transformer: Sequential Patterns (long-term)            â”‚ â•‘
â•‘  â”‚ â”œâ”€ Copula: Tail Dependence (multi-asset)                       â”‚ â•‘
â•‘  â”‚ â”œâ”€ Anomaly: Safety Layer (rug pulls, crashes)                  â”‚ â•‘
â•‘  â”‚ â””â”€ Ensemble: Kalman-filtered combination                        â”‚ â•‘
â•‘  â”‚                                                                    â”‚ â•‘
â•‘  â”‚ PASO 5: PORTFOLIO AGENT (Paso 1-4 output â†’ decisions)           â”‚ â•‘
â•‘  â”‚ â”œâ”€ ExpertEvaluator: Sortino, Win Rate, Profit Factor per expert â”‚ â•‘
â•‘  â”‚ â”œâ”€ DynamicWeighting: Thompson Sampling (multi-armed bandit)     â”‚ â•‘
â•‘  â”‚ â”œâ”€ SignalGenerator: Long/Short/Hold (agreement-based)           â”‚ â•‘
â•‘  â”‚ â”œâ”€ DynamicStopLoss: Adaptive Ïƒ-based                            â”‚ â•‘
â•‘  â”‚ â”œâ”€ PositionSizer: Kelly Criterion (0.25x fractional)            â”‚ â•‘
â•‘  â”‚ â”œâ”€ StakingAllocator: Lending pool APY (3-15%)                  â”‚ â•‘
â•‘  â”‚ â””â”€ PortfolioAgent: Orquesta todo arriba                         â”‚ â•‘
â•‘  â”‚                                                                    â”‚ â•‘
â•‘  â”‚ OUTPUT: engine_decisions (signal, confidence, agreement, SL)     â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘          â†‘ INPUT (datos del cache)    â†“ OUTPUT (a DB + cache)            â•‘
â•‘                                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘                                                                           â•‘
â•‘  ğŸ“ LAYER 2: MODEL TRAINING (Offline, Cron 1x/dÃ­a @ 00:00 UTC)          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ train_models.py                                                   â”‚ â•‘
â•‘  â”‚ â”œâ”€ Carga histÃ³rico 6 meses                                       â”‚ â•‘
â•‘  â”‚ â”œâ”€ Entrena 9 expertos en paralelo (ThreadPool)                   â”‚ â•‘
â•‘  â”‚ â”‚  â”œâ”€ HMM: fit() + covariance                                   â”‚ â•‘
â•‘  â”‚ â”‚  â”œâ”€ XGBoost: fit() + n_estimators=200                        â”‚ â•‘
â•‘  â”‚ â”‚  â”œâ”€ GARCH: arch_model + p=1,q=1                            â”‚ â•‘
â•‘  â”‚ â”‚  â””â”€ ... otros modelos                                        â”‚ â•‘
â•‘  â”‚ â”œâ”€ Cachea en pickle: data/trained_models.pkl (~50MB)            â”‚ â•‘
â•‘  â”‚ â””â”€ run_engine.py reutiliza (sin reentrenar)                    â”‚ â•‘
â•‘  â”‚                                                                    â”‚ â•‘
â•‘  â”‚ Impacto: Reduce engine ciclo 60s â†’ 2-3s (25x mÃ¡s rÃ¡pido)       â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘          â†“ INPUT (histÃ³rico 6mo)      â†“ OUTPUT (modelos pickle)          â•‘
â•‘                                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘                                                                           â•‘
â•‘  ğŸ“¡ LAYER 1: DATA FETCHER (Always-on)                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚ run_data_fetcher.py (Cada 60s)                                    â”‚ â•‘
â•‘  â”‚ â”œâ”€ Fetch: Binance API â†’ precio actual (BTC, ETH, SOL, ...)     â”‚ â•‘
â•‘  â”‚ â”œâ”€ Cache: Redis/memory (< 1ms lookup)                           â”‚ â•‘
â•‘  â”‚ â”œâ”€ Persist: SQLite market_data table (histÃ³rico 1yr+)           â”‚ â•‘
â•‘  â”‚ â””â”€ Status: Ready para engine                                     â”‚ â•‘
â•‘  â”‚                                                                    â”‚ â•‘
â•‘  â”‚ No bloquea nada. Fallos API â†’ usa Ãºltimo cached price          â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘          â†“ INPUT (exchange API)       â†“ OUTPUT (cache + DB)              â•‘
â•‘                                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘                                                                           â•‘
â•‘  ğŸ—„ï¸  CENTRAL: DATABASE + CONFIG                                         â•‘
â•‘  â”œâ”€ SQLite: neural_risk.db (decisiones, Ã³rdenes, fills)                 â•‘
â•‘  â”œâ”€ Redis: cache de precios (opcional)                                  â•‘
â•‘  â”œâ”€ Config: config.yaml (parÃ¡metros globales)                           â•‘
â•‘  â””â”€ Models: data/trained_models.pkl (cache)                            â•‘
â•‘                                                                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  INVESTIGACIÃ“N (Development, NO interfiere con live)                     â•‘
â•‘  â”œâ”€ backtest_v0.2.0.ipynb: Test Paso 1-5 en histÃ³rico                   â•‘
â•‘  â”œâ”€ experiment_params.ipynb: Nuevas ideas/parÃ¡metros                    â•‘
â•‘  â””â”€ data: BTC_USD_data.csv, ETH_USD_data.csv (6 meses histÃ³rico)         â•‘
â•‘                                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ¬ FLUJO DE EJECUCIÃ“N EN TIEMPO REAL

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    CICLO TÃPICO: 09:00-09:02 UTC                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

09:00:00 - LAYER 1: DATA FETCHER (cada 60s)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ python scripts/run_data_fetcher.py                                     â”‚
â”‚                                                                         â”‚
â”‚ âœ… Binance API call: GET /api/v3/ticker/price?symbol=BTCUSDT         â”‚
â”‚    Response: {"BTC": 45200, "ETH": 2500, "SOL": 135, ...}             â”‚
â”‚                                                                         â”‚
â”‚ âœ… Cache en Redis: SET "price:BTC" 45200 EX 60                        â”‚
â”‚    (latency < 1ms en siguientes lecturas)                             â”‚
â”‚                                                                         â”‚
â”‚ âœ… DB INSERT: market_data (timestamp, asset, price, volume, ...)      â”‚
â”‚    5 assets â†’ 5 rows en ~50ms                                         â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“Š Status: READY para Engine                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
09:01:00 - LAYER 3: ENGINE (Paso 1-4 + Paso 5)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ python scripts/run_engine.py                                           â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“– Arquitectura:                                                        â”‚
â”‚ â”œâ”€ Lectura de cache (< 1ms)                                           â”‚
â”‚ â”œâ”€ ThreadPoolExecutor(max_workers=4) para 5 assets                    â”‚
â”‚ â””â”€ Procesa en paralelo (no secuencial)                                â”‚
â”‚                                                                         â”‚
â”‚ â±ï¸  PASO 1-4 Timing (por asset, paralelo):                            â”‚
â”‚ â”œâ”€ DATA LOADING: 100ms                                                â”‚
â”‚ â”‚  â””â”€ Leer Ãºltimas 1000 velas del DB                                 â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ 9 EXPERTOS (paralelo ThreadPool):                                 â”‚
â”‚ â”‚  â”œâ”€ HMM: 50ms                                                       â”‚
â”‚ â”‚  â”œâ”€ XGBoost: 100ms                                                  â”‚
â”‚ â”‚  â”œâ”€ Causal: 80ms                                                    â”‚
â”‚ â”‚  â”œâ”€ Deep TFT: 200ms (con LSTM)                                     â”‚
â”‚ â”‚  â”œâ”€ GARCH: 120ms                                                    â”‚
â”‚ â”‚  â”œâ”€ LSTM/Transformer: 300ms                                        â”‚
â”‚ â”‚  â”œâ”€ Copula: 150ms                                                   â”‚
â”‚ â”‚  â”œâ”€ Anomaly: 100ms                                                  â”‚
â”‚ â”‚  â””â”€ Ensemble: 200ms                                                â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”‚  Total (paralelo, 4 workers): ~800ms                               â”‚
â”‚ â”‚  Total (secuencial): ~1,300ms (1.3s)                              â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â””â”€ PASS 1-4 TOTAL: ~900ms (con overhead)                             â”‚
â”‚                                                                         â”‚
â”‚ â±ï¸  PASO 5 (PortfolioAgent):                                          â”‚
â”‚ â”œâ”€ ExpertEvaluator: 100ms                                             â”‚
â”‚ â”‚  â””â”€ Calcula Sortino, Win Rate, PF para cada experto               â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ DynamicWeighting: 50ms                                             â”‚
â”‚ â”‚  â””â”€ Thompson Sampling â†’ pesos por experto                         â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ SignalGenerator: 150ms                                             â”‚
â”‚ â”‚  â”œâ”€ Combina 9 seÃ±ales con pesos                                    â”‚
â”‚ â”‚  â””â”€ Genera LONG/SHORT/HOLD por asset                              â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ DynamicStopLoss: 80ms                                              â”‚
â”‚ â”‚  â””â”€ SL = entry Â± (Ïƒ * confidence * vol * threshold)              â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ PositionSizer: 60ms                                                â”‚
â”‚ â”‚  â””â”€ Kelly Criterion â†’ position size en USDT                        â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ StakingAllocator: 40ms                                             â”‚
â”‚ â”‚  â””â”€ Si HOLD â†’ APY lending pool                                     â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â””â”€ PASO 5 TOTAL: ~480ms                                               â”‚
â”‚                                                                         â”‚
â”‚ ğŸ¯ DECISIONES FINALES (engine_decisions table):                        â”‚
â”‚    BTC: LONG (conf=0.85, agree=0.62, SL=44300, pos_size=5000)        â”‚
â”‚    ETH: SHORT (conf=0.72, agree=-0.65, SL=2550, pos_size=3000)       â”‚
â”‚    SOL: HOLD (conf=0.48, agree=0.15, staking_apy=0.06)               â”‚
â”‚    ...                                                                 â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“¤ DB INSERT: engine_decisions (5 rows en ~50ms)                      â”‚
â”‚                                                                         â”‚
â”‚ â±ï¸  ENGINE TOTAL PER CYCLE: ~1,500ms (sin overhead de IO)             â”‚
â”‚     CON OVERHEAD REAL: ~2-3 segundos (incluye IO, locks)             â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“Š Status: Decisiones guardadas, listas para Executor                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
09:02:00 - LAYER 4: EXECUTOR
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ python scripts/run_executor.py                                        â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“– Flujo:                                                              â”‚
â”‚ â”œâ”€ Query: SELECT * FROM engine_decisions WHERE no existe order       â”‚
â”‚ â”‚  â””â”€ Encuentra: BTC=LONG, ETH=SHORT (HOLD es skipped)              â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ VALIDATION (per orden):                                            â”‚
â”‚ â”‚  â”œâ”€ Check daily loss: -5% < actual_loss? âœ…                        â”‚
â”‚ â”‚  â”œâ”€ Check confidence: 0.85 > 0.50? âœ…                             â”‚
â”‚ â”‚  â”œâ”€ Check position size: 5000 USDT available? âœ…                  â”‚
â”‚ â”‚  â””â”€ All pass â†’ Proceed                                             â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ EXECUTION (Binance API):                                           â”‚
â”‚ â”‚  â”œâ”€ BTC: POST /api/v3/order                                        â”‚
â”‚ â”‚  â”‚  â”œâ”€ side: BUY                                                   â”‚
â”‚ â”‚  â”‚  â”œâ”€ quantity: 0.1107 BTC (5000 USDT / 45200)                  â”‚
â”‚ â”‚  â”‚  â””â”€ Response: order_id = 45873957234                          â”‚
â”‚ â”‚  â”‚                                                                  â”‚
â”‚ â”‚  â”œâ”€ ETH: POST /api/v3/order                                        â”‚
â”‚ â”‚  â”‚  â”œâ”€ side: SELL                                                  â”‚
â”‚ â”‚  â”‚  â”œâ”€ quantity: 1.2 ETH (3000 USDT / 2500)                      â”‚
â”‚ â”‚  â”‚  â””â”€ Response: order_id = 45873957235                          â”‚
â”‚ â”‚  â”‚                                                                  â”‚
â”‚ â”‚  â””â”€ Retry logic (3x si falla): Network error? Retry despuÃ©s 1s   â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â”œâ”€ DB UPDATE: orders table (status=FILLED)                            â”‚
â”‚ â”‚  â””â”€ 2 Ã³rdenes insertadas en ~80ms                                 â”‚
â”‚ â”‚                                                                      â”‚
â”‚ â””â”€ Status: Ã“rdenes en el libro de Ã³rdenes del exchange              â”‚
â”‚                                                                         â”‚
â”‚ â±ï¸  EXECUTOR TOTAL: ~400ms (2 Ã³rdenes + retry logic)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
09:02:30 - LAYER 5: DASHBOARD (Refresca cada 30s)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ jupyter notebook notebooks/live_dashboard.ipynb                       â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“Š LIVE DISPLAY:                                                       â”‚
â”‚                                                                         â”‚
â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                            â”‚
â”‚ â•‘         ğŸ’° PnL METRICS                 â•‘                            â”‚
â”‚ â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£                            â”‚
â”‚ â•‘ ğŸŸ¢ Total PnL:        +2,340.50 USDT    â•‘                            â”‚
â”‚ â•‘ ğŸŸ¢ Daily PnL:           +456.80 USDT    â•‘                            â”‚
â”‚ â•‘ Total Trades:             23             â•‘                            â”‚
â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                            â”‚
â”‚                                                                         â”‚
â”‚ ğŸ“ POSICIONES ABIERTAS:                                                â”‚
â”‚   ğŸŸ¢ BTC | BUY  | 0.1107 | Entry: 45200 | Current: 45350 | PnL: +16.60 â”‚
â”‚   ğŸ”´ ETH | SELL | 1.2000 | Entry: 2500  | Current: 2495  | PnL: -6.00  â”‚
â”‚                                                                         â”‚
â”‚ ğŸ§  SEÃ‘ALES (Ãºltimas 24h):                                              â”‚
â”‚   ğŸ“ˆ LONG  | 12 | Confianza: 0.78 | Agreement: +0.52                 â”‚
â”‚   ğŸ“‰ SHORT | 8  | Confianza: 0.71 | Agreement: -0.48                 â”‚
â”‚   â¸ï¸  HOLD  | 5  | Confianza: 0.55 | Agreement: +0.12                 â”‚
â”‚                                                                         â”‚
â”‚ âœ… Sin alertas                                                          â”‚
â”‚                                                                         â”‚
â”‚ Status: Todo operando correctamente                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

09:03:00 - Siguiente CICLO (se repite cada 60 segundos)
```

---

## ğŸ“‹ TABLA DE TIMING

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Componente          â”‚ Frecuencia   â”‚ Tiempo Total                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Data Fetcher        â”‚ 60s          â”‚ 50-150ms                       â”‚
â”‚ Engine (Paso 1-4)   â”‚ 60s          â”‚ 1,500-2,000ms (paralelo)       â”‚
â”‚ Engine (Paso 5)     â”‚ 60s          â”‚ 480-600ms                      â”‚
â”‚ Executor            â”‚ 60s          â”‚ 200-400ms (con retry)          â”‚
â”‚ Dashboard           â”‚ 30s          â”‚ ~50ms (query DB)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CICLO TOTAL         â”‚ 60s          â”‚ 2-3 SEGUNDOS (paralelo)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ComparaciÃ³n:
  - Monolith (secuencial): 15-20 segundos âŒ
  - Microservicios (paralelo): 2-3 segundos âœ…
  - Ganancia: 6-8x mÃ¡s rÃ¡pido
```

---

## ğŸ¯ COMANDOS PARA EJECUTAR

### **Terminal 1: Data Fetcher**
```bash
python scripts/run_data_fetcher.py

# Esperado cada 60s:
# [2025-01-30 09:00:00] [DATA_FETCHER] Fetched prices: ['BTC', 'ETH', 'SOL', 'AVAX', 'ARB']
# [2025-01-30 09:00:05] [DATA_FETCHER] Saved to DB: 5 assets cached
```

### **Terminal 2: Engine**
```bash
python scripts/run_engine.py

# Esperado cada 60s:
# [2025-01-30 09:01:00] [ENGINE] Starting cycle: 5 assets
# [2025-01-30 09:01:02] [ENGINE] Cycle complete: 5 assets, 2340ms
# [2025-01-30 09:01:02] [ENGINE] Cycle result: {'cycle_time_ms': 2340, ...}
```

### **Terminal 3: Executor**
```bash
python scripts/run_executor.py

# Esperado:
# [2025-01-30 09:02:00] [EXECUTOR] Pending decisions: 2
# [2025-01-30 09:02:00] [EXECUTOR] Order placed: BUY 0.1107 BTC @ 45200
# [2025-01-30 09:02:01] [EXECUTOR] Order placed: SELL 1.2 ETH @ 2500
# [2025-01-30 09:02:01] [EXECUTOR] Cycle complete: 2 orders placed, 350ms
```

### **Terminal 4: Dashboard**
```bash
jupyter notebook notebooks/live_dashboard.ipynb

# Abre navegador â†’ http://localhost:8888
# Refresca cada 30s con mÃ©tricas live
```

---

## âœ… CHECKLIST OPERACIONAL

```
[ ] Terminal 1: Data Fetcher corriendo (verde)
[ ] Terminal 2: Engine corriendo (ciclos 2-3s)
[ ] Terminal 3: Executor corriendo (Ã³rdenes colocadas)
[ ] Terminal 4: Dashboard accesible (refresca 30s)
[ ] DB tiene datos: market_data, engine_decisions, orders
[ ] PnL aumenta (o al menos no decrece rÃ¡pidamente)
[ ] Logs limpios (sin errores rojos)
[ ] Alertas controladas (ninguna ğŸ”´)
[ ] Cron training scheduled (00:00 UTC)
```

---

## ğŸŠ RESULTADO ESPERADO

```
DespuÃ©s de 24 horas de operaciÃ³n:
â”œâ”€ Total Trades: 20-50
â”œâ”€ Win Rate: 55-65%
â”œâ”€ Sortino Ratio: 1.5-2.0+
â”œâ”€ Profit Factor: 1.8-2.5+
â”œâ”€ Total PnL: +500 USDT a +5,000 USDT (variable)
â”œâ”€ Max Drawdown: -10% a -15%
â””â”€ System Status: âœ… STABLE, READY TO SCALE

Escalar a 50% capital â†’ si OK
Escalar a 100% capital â†’ si OK en 1 semana
Agregar mÃ¡s assets â†’ SOL, AVAX, ARB
```

---

v0.2.0 | OPERACIONAL | 2025-01-30 ğŸš€
